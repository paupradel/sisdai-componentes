(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["sisdai-componentes"]=t():e["sisdai-componentes"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"523d":function(e,t,n){"use strict";n("86d5")},"86d5":function(e,t,n){},d11d:function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e,t=document){return"string"===typeof e?Array.from(t.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}function t(e){const t=document.createElement("div");t.className="scrollama__debug-step "+e,t.style.position="fixed",t.style.left="0",t.style.width="100%",t.style.zIndex="9999",t.style.borderTop="2px solid black",t.style.borderBottom="2px solid black";const n=document.createElement("p");return n.style.position="absolute",n.style.left="0",n.style.height="1px",n.style.width="100%",n.style.borderTop="1px dashed black",t.appendChild(n),document.body.appendChild(t),t}function n({id:e,step:n,marginTop:o}){const{index:r,height:s}=n,i=`scrollama__debug-step--${e}-${r}`;let a=document.querySelector("."+i);a||(a=t(i)),a.style.top=-1*o+"px",a.style.height=s+"px",a.querySelector("p").style.top=s/2+"px"}function o(){const e="abcdefghijklmnopqrstuvwxyz",t=Date.now(),n=[];for(let o=0;o<6;o+=1){const t=e[Math.floor(Math.random()*e.length)];n.push(t)}return`${n.join("")}${t}`}function r(e){console.error("scrollama error: "+e)}function s(e){return+e.getAttribute("data-scrollama-index")}function i(e,t){const n=Math.ceil(e/t),o=[],r=1/n;for(let s=0;s<n+1;s+=1)o.push(s*r);return o}function a(e){if("string"===typeof e&&e.indexOf("px")>0){const t=+e.replace("px","");return isNaN(t)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:t}}return"number"!==typeof e&&isNaN(+e)?null:(e>1&&err("offset value is greater than 1. Fallback to 1."),e<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,e),1)})}function l(e){e.forEach(e=>e.node.setAttribute("data-scrollama-index",e.index))}function c(e){const{top:t}=e.getBoundingClientRect(),n=window.pageYOffset,o=document.body.clientTop||0;return t+n-o}let d,u,f;function p(e){const t=e?e.scrollTop:window.pageYOffset;d!==t&&(d=t,d>u?f="down":d<u&&(f="up"),u=d)}function h(e){d=0,u=0,document.addEventListener("scroll",()=>p(e))}function m(){let t,d,u,m={},y=o(),g=[],b=0,v=!1,x=!1,_=!1,S=!1,w=[];function E(){m={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},w=[]}function O(e){e&&!v&&I(),!e&&v&&M(),v=e}function P(e,t){const n=s(e),o=g[n];void 0!==t&&(o.progress=t);const r={element:e,index:n,progress:t,direction:f};"enter"===o.state&&m.stepProgress(r)}function $(e,t=!0){const n=s(e),o=g[n],r={element:e,index:n,direction:f};o.direction=f,o.state="enter",w[n]||m.stepEnter(r),S&&(w[n]=!0)}function j(e,t=!0){const n=s(e),o=g[n];if(!o.state)return!1;const r={element:e,index:n,direction:f};x&&("down"===f&&o.progress<1?P(e,1):"up"===f&&o.progress>0&&P(e,0)),o.direction=f,o.state="exit",m.stepExit(r)}function C([e]){const t=s(e.target),n=g[t],o=e.target.offsetHeight;o!==n.height&&(n.height=o,z(n),A(n),k(n))}function T([e]){p(d);const{isIntersecting:t,target:n}=e;t?$(n):j(n)}function q([e]){const t=s(e.target),n=g[t],{isIntersecting:o,intersectionRatio:r,target:i}=e;o&&"enter"===n.state&&P(i,r)}function z({observers:e}){Object.keys(e).map(t=>{e[t].disconnect()})}function M(){g.forEach(z)}function k(e){const t=new ResizeObserver(C);t.observe(e.node),e.observers.resize=t}function N(){g.forEach(k)}function A(e){const o=window.innerHeight,r=e.offset||t,s="pixels"===r.format?1:o,i=r.value*s,a=e.height/2-i,l=e.height/2-(o-i),c=`${a}px 0px ${l}px 0px`,d=u,f=.5,p={rootMargin:c,threshold:f,root:d},h=new IntersectionObserver(T,p);h.observe(e.node),e.observers.step=h,_&&n({id:y,step:e,marginTop:a,marginBottom:l})}function R(){g.forEach(A)}function L(e){const n=window.innerHeight,o=e.offset||t,r="pixels"===o.format?1:n,s=o.value*r,a=-s+e.height,l=s-n,c=`${a}px 0px ${l}px 0px`,d=i(e.height,b),u={rootMargin:c,threshold:d},f=new IntersectionObserver(q,u);f.observe(e.node),e.observers.progress=f}function H(){g.forEach(L)}function I(){M(),N(),R(),x&&H()}const B={setup:({step:n,parent:o,offset:s=.5,threshold:i=4,progress:f=!1,once:p=!1,debug:m=!1,container:y,root:v=null})=>(h(y),g=e(n,o).map((e,t)=>({index:t,direction:void 0,height:e.offsetHeight,node:e,observers:{},offset:a(e.dataset.offset),top:c(e),progress:0,state:void 0})),g.length?(x=f,S=p,_=m,b=Math.max(1,+i),t=a(s),d=y,u=v,E(),l(g),O(!0),B):(r("no step elements"),B)),enable:()=>(O(!0),B),disable:()=>(O(!1),B),destroy:()=>(O(!1),E(),B),resize:()=>(I(),B),offset:e=>null===e||void 0===e?t.value:(t=a(e),I(),B),onStepEnter:e=>("function"===typeof e?m.stepEnter=e:r("onStepEnter requires a function"),B),onStepExit:e=>("function"===typeof e?m.stepExit=e:r("onStepExit requires a function"),B),onStepProgress:e=>("function"===typeof e?m.stepProgress=e:r("onStepProgress requires a function"),B)};return B}return m}))},fb15:function(e,t,n){"use strict";n.r(t),n.d(t,"install",(function(){return g})),n.d(t,"NarrativaScroll",(function(){return o}));var o={};if(n.r(o),n.d(o,"default",(function(){return y})),n.d(o,"install",(function(){return m})),n.d(o,"NarrativaScroll",(function(){return h})),"undefined"!==typeof window){var r=window.document.currentScript,s=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(n.p=s[1])}var i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"contenedor narrativa-scroll",attrs:{id:e.id_scroll}},[t("div",{staticClass:"fondo-narrativa"},e._l(e.bullets,(function(e,n){return t("div",{key:n,class:"contenedor-fondo fondo-"+n},[t("picture",[t("source",{attrs:{srcset:e.imagen,media:"(min-width: 769px)"}}),t("img",{attrs:{srcset:e.imagen,alt:""}})])])})),0),t("article",e._l(e.bullets,(function(n,o){return t("div",{key:o,class:"step step-"+o,attrs:{"data-step":o}},[t("div",{staticClass:"bullet",domProps:{innerHTML:e._s(n.html)}})])})),0)])},a=[],l=n("d11d"),c=n.n(l),d={name:"NarrativaScroll",props:{id_scroll:{default:()=>"scrolly-portada",type:String},bullets:{default:()=>[{id:"01",html:"<p>bullet 1</p>",imagen:"https://placekitten.com/1920/1080"},{id:"02",html:"<p>bullet 2</p>",imagen:"https://placekitten.com/1920/1082"}],type:Array},debug:{type:Boolean,default:()=>!1}},data(){return{y_scrolleado:null,y_scrolleado_normalizado:null}},mounted(){this.inizializandoScrollama()},methods:{inizializandoScrollama(){this.scrolly=document.querySelector("#"+this.id_scroll),this.fondo_portada=this.scrolly.querySelector("div.fondo-narrativa"),this.step=this.scrolly.querySelector("article").querySelectorAll(".step"),this.scroller=c()(),this.scroller.setup({step:`#${this.id_scroll} .step`,offset:.5,debug:this.debug}).onStepEnter(this.cambiandoPaso),this.reescalandoPantalla(),window.addEventListener("resize",this.reescalandoPantalla),window.addEventListener("scroll",this.calculandoDistanciaScrolleada)},reescalandoPantalla(){this.scroller.resize()},cambiandoPaso(e){this.paso=e.index,this.step.forEach((t,n)=>n===e.index?t.classList.add("activo"):t.classList.remove("activo")),this.fondo_portada.querySelectorAll(".contenedor-fondo").forEach(e=>e.style.opacity=0),console.log(this.fondo_portada);for(var t=0;t<this.bullets.length;t++)this.paso===t&&(this.fondo_portada.querySelector(".contenedor-fondo.fondo-"+this.paso).style.opacity=1)},calculandoDistanciaScrolleada(){var e=this.scrolly.offsetTop;e<window.pageYOffset&&(this.y_scrolleado=window.pageYOffset-e,this.y_scrolleado_normalizado=this.y_scrolleado/this.scrolly.clientHeight)}}},u=d;n("523d");function f(e,t,n,o,r,s,i,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}var p=f(u,i,a,!1,null,"2282bb24",null),h=p.exports;function m(e){m.installed||(m.installed=!0,e.component(h.name,h))}var y=m;function g(e){g.installed||(g.installed=!0,e.use(o))}t["default"]=g}})}));
//# sourceMappingURL=sisdai-componentes.umd.min.js.map